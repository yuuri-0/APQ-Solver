<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>APQ Stage 3 Auto Solver – Mobile</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #101015;
    color: #f5f5f5;
  }

  .wrapper {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: stretch;
    padding: 10px;
    box-sizing: border-box;
  }

  .card {
    background: #1f1f26;
    border-radius: 14px;
    padding: 14px 14px 16px;
    width: 100%;
    max-width: 420px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.6);
    box-sizing: border-box;
  }

  h1 {
    font-size: 20px;
    margin: 0 0 2px 0;
  }

  .byline {
    font-size: 13px;
    color: #b4b4c8;
    margin-bottom: 8px;
  }

  .stage-image {
    width: 100%;
    border-radius: 8px;
    margin: 6px 0 8px 0;
    display: block;
  }

  .platform {
    font-size: 17px;
    font-weight: 600;
    color: #9eb4ff;
    margin-bottom: 10px;
  }

  label {
    display: block;
    font-size: 15px;
    margin-bottom: 6px;
  }

  .input-row {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .input-row input[type="tel"] {
    font-size: 24px;
    padding: 8px 10px;
    flex: 1 1 60%;
    max-width: 65%;
    border-radius: 10px;
    border: 1px solid #555a80;
    background: #252537;
    color: #ffffff;
    box-sizing: border-box;
  }

  .input-row input[type="tel"]:focus {
    outline: none;
    border-color: #7d9bff;
    box-shadow: 0 0 0 2px rgba(125,155,255,0.35);
  }

  .clear-btn {
    font-size: 16px;
    padding: 10px 14px;
    border-radius: 10px;
    border: 1px solid #777;
    background: #3a3a50;
    color: #f5f5f5;
    white-space: nowrap;
    flex: 0 0 auto;
  }

  .clear-btn:active {
    background: #4a4a64;
  }

  /* On extra small screens, stack input and button */
  @media (max-width: 360px) {
    .input-row {
      flex-direction: column;
      align-items: stretch;
    }
    .input-row input[type="tel"] {
      max-width: 100%;
    }
    .clear-btn {
      align-self: flex-end;
    }
  }

  #result-label {
    margin-top: 14px;
    font-size: 15px;
    opacity: 0.9;
  }

  #result {
    margin-top: 4px;
    font-weight: bold;
    font-size: 30px;
    letter-spacing: 3px;
  }

  .examples {
    margin-top: 14px;
    font-size: 13px;
    color: #d0d0e0;
  }

  .examples-title {
    font-weight: 700;
    margin-bottom: 4px;
  }

  .examples-line {
    margin: 2px 0;
  }

  .note {
    margin-top: 16px;
    font-size: 13px;
    color: #bdbdd0;
  }

  .blue {
    color: #7db4ff;
    font-weight: 600;
  }

  .red {
    color: #ff6b6b;
    font-weight: 600;
  }

  .disclaimer {
    margin-top: 10px;
    font-size: 11px;
    color: #aaaaaa;
  }
</style>
</head>
<body>
<div class="wrapper">
  <div class="card">
    <h1>APQ Stage 3 Solver – Mobile</h1>
    <div class="byline">By Yuuri</div>

    <img src="assets/plats-start.jpg" alt="APQ Platforms" class="stage-image">

    <div class="platform">Platform: C6D95</div>

    <label for="codeInput">Type your code (1–5 digits):</label>
    <div class="input-row">
      <!-- Phone will show numeric keypad -->
      <input id="codeInput" type="tel"
             inputmode="numeric"
             pattern="[0-9]*"
             maxlength="5"
             autocomplete="off"
             oninput="solve()">
      <button class="clear-btn" onclick="clearInput()">Clear</button>
    </div>

    <div id="result-label">Answer:</div>
    <div id="result"></div>

    <div class="examples">
      <div class="examples-title">Quick examples:</div>
      <div class="examples-line">3323 → C69</div>
      <div class="examples-line">21 → 6</div>
      <div class="examples-line">223 → D95</div>
      <div class="examples-line">11 → All Down</div>
    </div>

    <div class="note">
      If there are <span class="blue">44</span>, check the rest of the platform, if the next platform is 4. The following two might clear the stage right away.<br><br>

      <strong>Shortcut:</strong><br>
      If there are three correct numbers on the bottom. Eg: C69<br>
      If <span class="red">A2</span> has 3 slime. The top number correct answer will be <span class="red">B3</span>.<br>
      If <span class="red">A3</span> has 3 slime. The top number will be <span class="red">2B</span>.<br>
    </div>

    <div class="disclaimer">
      Disclaimer: This APQ Solver is not a third-party tool that gives you the complete answer automatically. You still need to count the slimes. If you miscount the slimes, the entire answer will be incorrect.
    </div>
  </div>
</div>

<script>
const mapping = ['C','6','D','9','5'];

function clearInput() {
  const input = document.getElementById('codeInput');
  const resultEl = document.getElementById('result');
  input.value = "";
  resultEl.innerText = "";
  input.focus();
}

function solve() {
  let input = document.getElementById('codeInput').value.trim();
  const resultEl = document.getElementById('result');

  if (!input || !input.match(/^[0-9]+$/)) {
    resultEl.innerText = "";
    return;
  }

  let arr = input.split('').map(Number);
  const len = arr.length;
  const unique = [...new Set(arr)];

  // All 1s → All Down
  if (arr.every(v => v === 1)) {
    resultEl.innerText = "All Down";
    return;
  }

  // Only 1s and 2s → smallest-number rule
  if (unique.every(v => v === 1 || v === 2)) {
    const smallest = Math.min(...arr);
    const pos = arr.indexOf(smallest);
    resultEl.innerText = mapping[pos];
    return;
  }

  // 2 and 3 together → exactly 3 correct platforms (fill rest with 3)
  if (arr.includes(2) && arr.includes(3) && !arr.includes(4)) {
    let full = arr.slice();
    while (full.length < 5) full.push(3);
    let idx = [];
    for (let i = 0; i < 5; i++) if (full[i] === 3) idx.push(i);
    idx = idx.slice(0, 3);
    resultEl.innerText = idx.map(i => mapping[i]).join('');
    return;
  }

  // 3 and 4 together → exactly 2 correct platforms (fill rest with 4)
  if (arr.includes(3) && arr.includes(4) && !arr.includes(2)) {
    let full = arr.slice();
    while (full.length < 5) full.push(4);
    let idx = [];
    for (let i = 0; i < 5; i++) if (full[i] === 4) idx.push(i);
    idx = idx.slice(0, 2);
    resultEl.innerText = idx.map(i => mapping[i]).join('');
    return;
  }

  // Normal highest-number rule
  const max = Math.max(...arr);
  let ans = "";
  for (let i = 0; i < len; i++) if (arr[i] === max) ans += mapping[i];
  resultEl.innerText = ans;
}
</script>
</body>
</html>
