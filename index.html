<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>APQ Stage 3 Auto Solver</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    font-size: 18px;
    max-width: 520px;
    margin: 0 auto;
    line-height: 1.6;
    background: #60606d;
    color: #eee;
  }
  .card {
    background: #202020;
    border-radius: 12px;
    padding: 20px 18px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.35);
  }
  h2 {
    font-size: 22px;
    margin: 0 0 2px 0;
    color: #ffffff;
  }
  .byline {
    font-size: 14px;
    margin: 0 0 10px 0;
    color: #bbbbbb;
  }
  .platform-title {
    font-size: 20px;
    font-weight: 700;
    margin-top: 10px;
    margin-bottom: 10px;
    color: #9eb4ff;
  }
  .stage-image {
    width: 100%;
    border-radius: 8px;
    margin: 8px 0 8px 0;
    display: block;
  }
  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: #ffffff;
  }
  input {
    font-size: 20px;
    padding: 8px 10px;
    width: 100%;
    box-sizing: border-box;
    border-radius: 8px;
    border: 1px solid #666;
    background: #2d2d2d;
    color: #fff;
    outline: none;
  }
  input:focus {
    border-color: #7d9bff;
    box-shadow: 0 0 0 2px rgba(125,155,255,0.35);
  }
  #result {
    margin-top: 12px;
    font-weight: bold;
    font-size: 22px;
    color: #ffffff;
  }
  .examples {
    margin-top: 18px;
    font-size: 16px;
    color: #e5e5e5;
  }
  .examples h3 {
    margin: 0 0 4px 0;
    font-size: 16px;
    font-weight: 600;
    color: #ffffff;
  }
  .examples p {
    margin: 2px 0;
  }
  .note {
    margin-top: 14px;
    font-size: 14px;
    color: #cccccc;
  }
  .note .hl {
    color: #ff6b6b;
    font-weight: 700;
  }
  .disclaimer {
    margin-top: 10px;
    font-size: 11px;
    color: #aaaaaa;
  }
</style>
</head>
<body>
<div class="card">
  <h2>APQ Stage 3 Auto Solver</h2>
  <div class="byline">By Yuuri</div>

  <img src="assets/plats-start.jpg" alt="APQ Platforms" class="stage-image">

  <div class="platform-title">Platform: C6D95</div>

  <label for="codeInput">Type your code (1–5 digits):</label>
  <input id="codeInput" type="text" maxlength="5" oninput="solve()" autocomplete="off">

  <div id="result"></div>

  <div class="examples">
    <h3>Quick examples:</h3>
    <p>3323 → C69</p>
    <p>21222 → <span style="color:#7db4ff; font-weight:bold;">All Except</span> 6</p>
    <p>223 → D95</p>
    <p>11 → All Down</p>
  </div>

  <p class="note">
    If there are <span style="color:#7db4ff; font-weight:bold;">44</span>, check the rest of the platform, if the next platform is 4. The following two might clear the stage right away.<br><br>
     <p class="note">
  <strong>Shortcut:</strong><br>
    If there are three correct numbers on the bottom. Eg: C69<br>
    If <span class="hl">A2</span> has 3 slime. The top number correct answer will be <span class="hl">B3</span>.<br>
    If <span class="hl">A3</span> has 3 slime. The top number will be <span class="hl">2B</span>.
  </p>

  <p class="disclaimer">
    Disclaimer: This APQ Solver is not a third-party tool that gives you the complete answer automatically. You still need to count the slimes. If you miscount the slimes, the entire answer will be incorrect.
  </p>
</div>

<script>
const mapping = ['C','6','D','9','5'];

function solve() {
  let input = document.getElementById('codeInput').value.trim();
  const resultEl = document.getElementById('result');
  if (!input || !input.match(/^[0-9]+$/)) { resultEl.innerText = ""; return; }

  let arr = input.split('').map(Number);
  const len = arr.length;
  const unique = [...new Set(arr)];

  // All 1s → All Down
  if (arr.every(v => v === 1)) {
    resultEl.innerText = "Answer: All Down";
    return;
  }

  // Only 1s and 2s → smallest-number rule
  if (unique.every(v => v === 1 || v === 2)) {
    const smallest = Math.min(...arr);
    const pos = arr.indexOf(smallest);
    resultEl.innerText = "Answer: " + mapping[pos];
    return;
  }

  // 2 and 3 together → exactly 3 correct platforms (fill rest with 3)
  if (arr.includes(2) && arr.includes(3) && !arr.includes(4)) {
    let full = arr.slice();
    while (full.length < 5) full.push(3);
    let idx = [];
    for (let i=0;i<5;i++) if (full[i]===3) idx.push(i);
    idx = idx.slice(0,3);
    resultEl.innerText = "Answer: " + idx.map(i=>mapping[i]).join('');
    return;
  }

  // 3 and 4 together → exactly 2 correct platforms (fill rest with 4)
  if (arr.includes(3) && arr.includes(4) && !arr.includes(2)) {
    let full = arr.slice();
    while (full.length < 5) full.push(4);
    let idx = [];
    for (let i=0;i<5;i++) if (full[i]===4) idx.push(i);
    idx = idx.slice(0,2);
    resultEl.innerText = "Answer: " + idx.map(i=>mapping[i]).join('');
    return;
  }

  // Normal highest-number rule
  const max = Math.max(...arr);
  let ans = "";
  for (let i=0;i<len;i++) if (arr[i]===max) ans += mapping[i];
  resultEl.innerText = "Answer: " + ans;
}
</script>
</body>
</html>
